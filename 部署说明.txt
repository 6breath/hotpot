# HotPot项目部署说明

## 环境要求

### 后端环境
- Java 17 或更高版本
- MySQL 8.0+
- Maven (可选，用于构建)

### 前端环境
- Node.js (如果需要重新构建前端)
- 如果只需部署，只需Web服务器（如Nginx）

## 部署步骤

### 1. 数据库配置

1. 安装并启动MySQL服务
2. 创建数据库：
   ```bash
   mysql -u root -p
   CREATE DATABASE hotpot_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
   ```
3. 导入数据表结构：
   ```bash
   mysql -u root -p hotpot_db < schema.sql
   ```

### 2. 后端部署

1. 确保已安装Java 17
2. 修改 `application.yaml` 中的数据库连接信息：
   ```yaml
   spring:
     datasource:
       url: jdbc:mysql://localhost:3306/hotpot_db?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai
       username: root  # 修改为实际数据库用户名
       password: root  # 修改为实际数据库密码
   ```
3. 启动后端服务：
   ```bash
   java -jar hotpot-ingredient-management-1.0.0.jar
   ```
   后端服务默认运行在 8080 端口

### 3. 前端部署

#### 方法一：使用Nginx部署（推荐）
1. 安装Nginx
2. 将 `dist` 目录下的所有文件复制到Nginx的html目录下
3. 配置Nginx反向代理，将/api请求转发到后端服务：
   ```nginx
   server {
       listen 80;
       server_name localhost;
       root /path/to/dist;
       index index.html;
       
       location /api {
           proxy_pass http://localhost:8080;
           proxy_set_header Host $host;
           proxy_set_header X-Real-IP $remote_addr;
           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
           proxy_set_header X-Forwarded-Proto $scheme;
       }
       
       location / {
           try_files $uri $uri/ /index.html;
       }
   }
   ```
4. 重启Nginx服务

#### 方法二：直接运行（开发环境）
1. 安装Node.js
2. 进入前端目录：
   ```bash
   cd hotpot-frontend
   ```
3. 安装依赖：
   ```bash
   npm install
   ```
4. 启动开发服务器：
   ```bash
   npm run dev
   ```
   前端开发服务器默认运行在 5173 端口

### 4. 访问应用

- 如果使用Nginx部署：直接访问 http://localhost
- 如果前后端分别启动：
  - 前端访问：http://localhost:5173
  - 后端API地址：http://localhost:8080

## 注意事项

1. 确保防火墙或安全组允许相应端口的访问
2. 根据实际环境调整数据库连接信息
3. 生产环境建议配置SSL证书
4. 生产环境建议使用反向代理服务器（如Nginx）来提供前端静态资源